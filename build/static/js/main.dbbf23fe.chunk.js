(window.webpackJsonpirmin=window.webpackJsonpirmin||[]).push([[0],{12:function(e,t,i){e.exports=i(21)},17:function(e,t,i){},18:function(e,t,i){},19:function(e,t,i){},21:function(e,t,i){"use strict";i.r(t);var n,a=i(0),s=i.n(a),r=i(10),l=i.n(r),c=(i(17),i(18),i(2)),u=i(1),o=i(4),h=i(3),m=i(5);!function(e){e[e.RULES=0]="RULES",e[e.MEMORIZING=1]="MEMORIZING",e[e.PROCESSING=2]="PROCESSING",e[e.SUCCESS=3]="SUCCESS",e[e.FAIL=4]="FAIL",e[e.ABOUT=5]="ABOUT",e[e.SETTINGS=6]="SETTINGS"}(n||(n={}));var d,v=i(6);!function(e){e[e.MANZU=0]="MANZU",e[e.PINZU=1]="PINZU",e[e.SOUZU=2]="SOUZU",e[e.JIHAI=3]="JIHAI"}(d||(d={}));var g,f=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,null,[{key:"generate",value:function(){var e=this.initTiles();return this.randomShuffle(e).slice(0,34)}},{key:"initTiles",value:function(){for(var e=[],t=1;t<10;t++)this.addTileType(e,d.MANZU,t),this.addTileType(e,d.PINZU,t),this.addTileType(e,d.SOUZU,t),t<8&&this.addTileType(e,d.JIHAI,t);return e}},{key:"addTileType",value:function(e,t,i){var n={suit:t,value:i};e.push(n),e.push(Object.assign({},n)),e.push(Object.assign({},n)),e.push(Object.assign({},n))}},{key:"shuffle",value:function(e){return e.sort((function(){return.5-Math.random()}))}},{key:"randomShuffle",value:function(e){for(var t=1+10*Math.random(),i=e,n=0;n<t;n++)i=this.shuffle(i);return i}}]),e}(),S=function(){function e(){Object(c.a)(this,e),this.wall=[],this.deadWall=[],this.hand=[],this.discard=[],this.tsumo=void 0,this.kanTiles=[],this.sortTiles=!1}return Object(u.a)(e,[{key:"generate",value:function(e){this.sortTiles=e;var t=f.generate();return this.hand=t.slice(0,13),this.trySortHand(),this.wall=t.slice(13,30),this.deadWall=t.slice(30),this.discard=[],this.kanTiles=[],this.tsumo=void 0,this.getHand()}},{key:"getHand",value:function(){return this.hand.slice(0)}},{key:"getTsumo",value:function(){return this.tsumo}},{key:"getKanTiles",value:function(){return this.kanTiles.slice(0)}},{key:"getWall",value:function(){return this.wall.slice(0)}},{key:"getGroups",value:function(){var e=this,t=this.wall.concat(this.getHand());return this.tsumo&&(t=t.concat(this.tsumo)),t.reduce((function(t,i){var n="".concat(i.value).concat(e.getSuitStr(i.suit));return t[n]?t[n]++:t[n]=1,t}),{})}},{key:"getSuitStr",value:function(e){switch(e){case d.MANZU:return"m";case d.PINZU:return"p";case d.SOUZU:return"s";case d.JIHAI:return"z"}}},{key:"getDiscard",value:function(){return this.discard.slice(0)}},{key:"getStr",value:function(){var e=this.hand.slice(0).sort(this.sortHandler),t="",i=e.filter((function(e){return e.suit===d.MANZU}));i.length&&(t+=i.map((function(e){return e.value})).join("")+"m");var n=e.filter((function(e){return e.suit===d.PINZU}));n.length&&(t+=n.map((function(e){return e.value})).join("")+"p");var a=e.filter((function(e){return e.suit===d.SOUZU}));a.length&&(t+=a.map((function(e){return e.value})).join("")+"s");var s=e.filter((function(e){return e.suit===d.JIHAI}));return s.length&&(t+=s.map((function(e){return e.value})).join("")+"z"),t}},{key:"nextTile",value:function(){var e=this.wall[0];return this.wall=this.wall.slice(1),this.tsumo=e,e}},{key:"dropTsumo",value:function(){if(this.tsumo){var e={suit:this.tsumo.suit,value:this.tsumo.value,tsumogiri:!0};this.discard.push(e),this.tsumo=void 0}return this.getHand()}},{key:"dropFromHand",value:function(e){if(this.tsumo){var t=this.hand[e],i={suit:t.suit,value:t.value,tsumogiri:!1};this.discard.push(i),this.hand.splice(e,1),this.hand.unshift(this.tsumo),this.trySortHand(),this.tsumo=void 0}return this.getHand()}},{key:"tryCallKan",value:function(e){if(!this.tsumo)return!1;var t=[this.tsumo].concat(Object(v.a)(this.hand.slice())),i=-1===e?this.tsumo:this.hand[e];return 4===t.filter((function(e){return e.value===i.value&&e.suit===i.suit})).length&&(this.kanTiles.unshift(i),this.hand=t.filter((function(e){return e.value!==i.value||e.suit!==i.suit})),this.trySortHand(),this.tsumo=this.deadWall[0],this.deadWall=this.deadWall.slice(1),!0)}},{key:"trySortHand",value:function(){this.sortTiles&&this.hand.sort(this.sortHandler)}},{key:"sortHandler",value:function(e,t){return e.suit===t.suit?e.value-t.value:e.suit-t.suit}},{key:"remainingTiles",get:function(){return this.wall.length}},{key:"hasTiles",get:function(){return!!this.wall.length}}]),e}(),p=i(7),T=i.n(p);!function(e){e[e.TANKI=0]="TANKI",e[e.SHANPON=1]="SHANPON",e[e.KANCHAN=2]="KANCHAN",e[e.RYANMEN_PENCHAN=3]="RYANMEN_PENCHAN"}(g||(g={}));var y,k=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"hasTempai",value:function(e){var t=this.getSuits(e);if(this.isChiitoi(t)||this.isKokushiMuso(t,e))return!0;var i=t.manSuit&&this.run([],this.getSimpleSuitStructure(t.manSuit)),n=t.pinSuit&&this.run([],this.getSimpleSuitStructure(t.pinSuit)),a=t.souSuit&&this.run([],this.getSimpleSuitStructure(t.souSuit)),s=t.honors&&this.run([],this.getSimpleSuitStructure(t.honors)),r=this.getPossibleStructures(i),l=this.getPossibleStructures(n),c=this.getPossibleStructures(a),u=this.getPossibleStructures(s);if(!!t.manSuit!==(0!==r.length)||!!t.pinSuit!==(0!==l.length)||!!t.souSuit!==(0!==c.length)||!!t.honors!==(0!==u.length))return!1;var o=this.processPossibleManSuits(r,l,c,u),h=!0,m=!1,d=void 0;try{for(var v,g=o[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var f=v.value;if(this.isReadyHand(f))return!0}}catch(S){m=!0,d=S}finally{try{h||null==g.return||g.return()}finally{if(m)throw d}}return console.log(o),!1}},{key:"processPossibleManSuits",value:function(e,t,i,n){if(!e.length)return this.processPossiblePinSuits(void 0,t,i,n);var a=[],s=!0,r=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var o=c.value;a.push.apply(a,Object(v.a)(this.processPossiblePinSuits(o,t,i,n)))}}catch(h){r=!0,l=h}finally{try{s||null==u.return||u.return()}finally{if(r)throw l}}return a}},{key:"processPossiblePinSuits",value:function(e,t,i,n){if(!t.length)return this.processPossibleSouSuits(e,void 0,i,n);var a=[],s=!0,r=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var o=c.value;a.push.apply(a,Object(v.a)(this.processPossibleSouSuits(e,o,i,n)))}}catch(h){r=!0,l=h}finally{try{s||null==u.return||u.return()}finally{if(r)throw l}}return a}},{key:"processPossibleSouSuits",value:function(e,t,i,n){if(!i.length)return this.processPossibleHonors(e,t,void 0,n);var a=[],s=!0,r=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var o=c.value;a.push.apply(a,Object(v.a)(this.processPossibleHonors(e,t,o,n)))}}catch(h){r=!0,l=h}finally{try{s||null==u.return||u.return()}finally{if(r)throw l}}return a}},{key:"processPossibleHonors",value:function(e,t,i,n){if(!n.length)return[{man:e,pin:t,sou:i}];var a=[],s=!0,r=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var o=c.value;a.push({man:e,pin:t,sou:i,honors:o})}}catch(h){r=!0,l=h}finally{try{s||null==u.return||u.return()}finally{if(r)throw l}}return a}},{key:"isReadyHand",value:function(e){var t=0,i=[];return e.man&&(e.man.pair&&t++,i.push.apply(i,Object(v.a)(e.man.waitPatterns))),e.pin&&(e.pin.pair&&t++,i.push.apply(i,Object(v.a)(e.pin.waitPatterns))),e.sou&&(e.sou.pair&&t++,i.push.apply(i,Object(v.a)(e.sou.waitPatterns))),e.honors&&(e.honors.pair&&t++,i.push.apply(i,Object(v.a)(e.honors.waitPatterns))),!(t>2||i.length>2)&&(2===t&&0===i.length||(!(0!==t||!(1===i.length&&i[0].type===g.TANKI||2===i.length&&i.every((function(e){return e.type===g.SHANPON}))))||!(1!==t||1!==i.length||![g.KANCHAN,g.RYANMEN_PENCHAN].includes(i[0].type))))}},{key:"getPossibleStructures",value:function(e){var t=this;return e&&e.length?e.filter((function(e){return t.isPossibleWaitPatterns(e.waitPatterns)})):[]}},{key:"isPossibleWaitPatterns",value:function(e){return!e.length||!(e.length>2)&&(!(1!==e.length||![g.TANKI,g.KANCHAN,g.RYANMEN_PENCHAN].includes(e[0].type))||!(2!==e.length||!e.every((function(e){return e.type===g.SHANPON}))))}},{key:"isChiitoi",value:function(e){var t=e.manSuit?this.getPairs(e.manSuit):[],i=e.pinSuit?this.getPairs(e.pinSuit):[],n=e.souSuit?this.getPairs(e.souSuit):[],a=e.honors?this.getPairs(e.honors):[];return 6===t.length+i.length+n.length+a.length}},{key:"isKokushiMuso",value:function(e,t){var i=new RegExp("^[1,9]{1,3}m[1,9]{1,3}p[1,9]{1,3}s[1-7]{6,8}z$");if(17!==t.length||!i.test(t))return!1;var n=e.manSuit,a=e.pinSuit,s=e.souSuit,r=e.honors,l=this.getPairs(n),c=this.getPairs(a),u=this.getPairs(s),o=this.getPairs(r),h=[].concat(Object(v.a)(l),Object(v.a)(c),Object(v.a)(u),Object(v.a)(o));if(h.length>1)return!1;if(!h.length)return new RegExp("^19m19p19s1234567z$").test(t);var m=l.length?n.join("").replace(l[0].toString(),""):n.join(""),d=c.length?a.join("").replace(c[0].toString(),""):a.join(""),g=u.length?s.join("").replace(u[0].toString(),""):s.join(""),f=o.length?r.join("").replace(o[0].toString(),""):r.join(""),S="".concat(m,"m").concat(d,"p").concat(g,"s").concat(f,"z");return new RegExp("^([19]m[19]{2}p[19]{2}s[1-7]{7}z|[19]{2}m[19]p[19]{2}s[1-7]{7}z|[19]{2}m[19]{2}p[19]s[1-7]{7}z|[19]{2}m[19]{2}p[19]{2}s[1-7]{6}z)$").test(S)}},{key:"getSuits",value:function(e){var t=new RegExp("^(([1-9]*)m)?(([1-9]*)p)?(([1-9]*)s)?(([1-7]*)z)?$"),i=e.match(t);if(!i)throw new Error("incorrect hand structure");return{manSuit:i[2]?i[2].split("").map((function(e){return Number(e)})):void 0,pinSuit:i[4]?i[4].split("").map((function(e){return Number(e)})):void 0,souSuit:i[6]?i[6].split("").map((function(e){return Number(e)})):void 0,honors:i[8]?i[8].split("").map((function(e){return Number(e)})):void 0}}},{key:"getSimpleSuitStructure",value:function(e){return{sets:[],unusedTiles:[],waitPatterns:[],pair:void 0,remainingTiles:e}}},{key:"run",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.remainingTiles.length<3)return t.unusedTiles=t.unusedTiles.concat(t.remainingTiles),t.remainingTiles=[],this.trySetStructure(e,t,i),e;var n=t.unusedTiles.slice(0),a=t.remainingTiles.slice(0),s=!0,r=!1,l=void 0;try{for(var c,u=t.remainingTiles[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var o=c.value,h=this.getSets(o,a),m=!0,d=!1,g=void 0;try{for(var f,S=h[Symbol.iterator]();!(m=(f=S.next()).done);m=!0){var p=f.value,T={sets:t.sets.length?t.sets.concat([p]):[p],remainingTiles:this.nextTiles.apply(this,[a].concat(Object(v.a)(p))),unusedTiles:n.slice(0)};this.run(e,T,i)}}catch(k){d=!0,g=k}finally{try{m||null==S.return||S.return()}finally{if(d)throw g}}n.push(o),a=this.nextTiles(a,o)}}catch(k){r=!0,l=k}finally{try{s||null==u.return||u.return()}finally{if(r)throw l}}var y={sets:t.sets,remainingTiles:a,unusedTiles:n};return this.trySetStructure(e,y,i),e}},{key:"trySetStructure",value:function(e,t,i){if(!e.filter((function(e){return e.sets.length===t.sets.length&&e.unusedTiles.join("")===t.unusedTiles.join("")&&e.sets.map((function(e){return e.join("")})).join(" ")===t.sets.map((function(e){return e.join("")})).join(" ")})).length){var n=this.getPairsAndWaitings(t.unusedTiles,i);t.pair=n.pair,t.waitPatterns=n.waitPatterns,e.push(t)}}},{key:"getPairsAndWaitings",value:function(e,t){var i,n=this.getPairs(e),a=e.slice(0);if(1===n.length){i=n[0];var s=n[0];a=this.nextTiles(a,s,s)}if(!a.length)return{pair:i,waitPatterns:[]};for(var r=[];a.length;){var l=this.getWaitPatternFrom(a[0],a,t);r.push(l),a=this.nextTiles.apply(this,[a].concat(Object(v.a)(l.tiles)))}if(r.find((function(e){return e.type===g.TANKI})))for(i=void 0,r=[],a=e.slice(0);a.length;){var c=this.getWaitPatternFrom(a[0],a,t);r.push(c),a=this.nextTiles.apply(this,[a].concat(Object(v.a)(c.tiles)))}return{pair:i,waitPatterns:r}}},{key:"nextTiles",value:function(e){for(var t=e.join(""),i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];for(var s=0,r=n;s<r.length;s++){var l=r[s];t=t.replace(l.toString(),"")}return t.split("").map((function(e){return Number(e)}))}},{key:"getSets",value:function(e,t){var i=[],n=this.getChii(e,t);n&&i.push(n);var a=this.getPon(e,t);return a&&i.push(a),i}},{key:"includesFrom",value:function(e){for(var t=e.join(""),i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];for(var s=0,r=n;s<r.length;s++){var l=r[s];if(!t.includes(l.toString()))return!1;t=t.replace(l.toString(),"")}return!0}},{key:"getPairs",value:function(e){var t=e.filter((function(e,t,i){return i.indexOf(e)==t})),i=[],n=!0,a=!1,s=void 0;try{for(var r,l=t[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var c=r.value;this.includesFrom(e,c,c)&&i.push(c)}}catch(u){a=!0,s=u}finally{try{n||null==l.return||l.return()}finally{if(a)throw s}}return i}},{key:"getChii",value:function(e,t){if(!(e>=8)){var i=e+1,n=e+2;return this.includesFrom(t,e,i,n)?[e,i,n]:void 0}}},{key:"getPon",value:function(e,t){if(this.includesFrom(t,e,e,e))return[e,e,e]}},{key:"getWaitPatternFrom",value:function(e,t,i){if(this.includesFrom(t,e,e))return{tiles:[e,e],type:g.SHANPON};if(9===e||i)return{tiles:[e],type:g.TANKI};var n=e+1;if(this.includesFrom(t,e,n))return{tiles:[e,n],type:g.RYANMEN_PENCHAN};if(8===e)return{tiles:[e],type:g.TANKI};var a=e+2;return this.includesFrom(t,e,a)?{tiles:[e,a],type:g.KANCHAN}:{tiles:[e],type:g.TANKI}}}]),e}(),b=function(){function e(){Object(c.a)(this,e),this.settings={},this.readSettings()}return Object(u.a)(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),Object(u.a)(e,[{key:"setSettings",value:function(e){for(var t in e){var i=e[t];this.setItem(t,i)}this.readSettings()}},{key:"getSettings",value:function(){return this.settings}},{key:"getDefault",value:function(){return{useTimer:!0,rememberTime:60,dropTime:20,sortTiles:!0,invertTiles:!0,hideTiles:!0}}},{key:"readSettings",value:function(){var e=this.getBoolValue("hasVisited",!1),t={useTimer:this.getBoolValue("useTimer",!0),rememberTime:this.getIntValue("rememberTime",60),dropTime:this.getIntValue("dropTime",20),sortTiles:this.getBoolValue("sortTiles",!0),invertTiles:this.getBoolValue("invertTiles",!0),hideTiles:this.getBoolValue("hideTiles",!0)},i=this.isDefault(t);t.defaultSettings=i,t.hasVisited=e,this.settings=t}},{key:"isDefault",value:function(e){var t=this.getDefault();for(var i in e)if(t[i]!=e[i])return!1;return!0}},{key:"getValue",value:function(e){return localStorage.getItem(e)}},{key:"getBoolValue",value:function(e,t){switch(this.getValue(e)){case"true":return!0;case"false":return!1;default:return t}}},{key:"getIntValue",value:function(e,t){var i=this.getValue(e);if(null===i)return t;var n=Number.parseInt(i);return Number.isSafeInteger(n)?n:t}},{key:"setItem",value:function(e,t){return localStorage.setItem(e,t)}}]),e}();b._instance=void 0,function(e){e[e.IDLE=0]="IDLE",e[e.PROCESSING=1]="PROCESSING",e[e.CHOOSE_TEMPAI=2]="CHOOSE_TEMPAI",e[e.CHOOSE_KAN=3]="CHOOSE_KAN"}(y||(y={}));var E=function(){function e(){Object(c.a)(this,e),this.handService=new S,this.tempaiService=new k,this.settingsStorage=b.instance,this.initialized=!1,this._currentScreen=void 0,this.previousScreen=void 0,this.showRules=!1,this.processingState=y.IDLE,this._remainingTime=0,this.timer=void 0,this.onChange=new T.a.Signal,this.onHandChanged=new T.a.Signal,this.onTimeChanged=new T.a.Signal,this.onProcessingStateChanged=new T.a.Signal,this.setFirstScreen(this.getSettings().hasVisited?n.MEMORIZING:n.RULES)}return Object(u.a)(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e,window.handService=this._instance.handService),this._instance}}]),Object(u.a)(e,[{key:"nextScreen",value:function(){switch(this._currentScreen){case n.RULES:this.setSettings({hasVisited:!0}),this.previousScreen?(this.setScreen(this.previousScreen),this.previousScreen=void 0):(this.generateHand(),this.setScreen(n.MEMORIZING));break;case n.MEMORIZING:this.handService.nextTile(),this.setScreen(n.PROCESSING);break;case n.PROCESSING:this.setScreen(n.FAIL);break;case n.FAIL:case n.SUCCESS:this.generateHand(),this.setScreen(n.MEMORIZING);break;case n.ABOUT:this.previousScreen?(this.setScreen(this.previousScreen),this.previousScreen=void 0):(this.generateHand(),this.setScreen(n.MEMORIZING));break;case n.SETTINGS:this.generateHand(),this.setScreen(n.MEMORIZING)}}},{key:"generateHand",value:function(){this.handService.generate(this.getSettings().sortTiles)}},{key:"setFirstScreen",value:function(e){if(e!==n.RULES&&e!==n.MEMORIZING)throw new Error("it's impossible to start game from ".concat(n[e]," screen"));e===n.RULES?this._currentScreen=n.RULES:(this._currentScreen=n.MEMORIZING,this.generateHand()),this.initialized=!0}},{key:"setScreen",value:function(e){this._currentScreen=e,this.clear(),this.onChange.dispatch()}},{key:"setSettings",value:function(e){this.settingsStorage.setSettings(e)}},{key:"getSettings",value:function(){return this.settingsStorage.getSettings()}},{key:"getDefault",value:function(){return this.settingsStorage.getDefault()}},{key:"setTimer",value:function(){var e=this;this.useTimer&&(this.clearTimer(),this._currentScreen===n.MEMORIZING&&(this._remainingTime=this.getSettings().rememberTime),this._currentScreen===n.PROCESSING&&(this._remainingTime=this.getSettings().dropTime),this.onTimeChanged.dispatch(),this.timer=setTimeout((function(){return e.onTimerTick()}),1e3))}},{key:"onTimerTick",value:function(){var e=this;0!==this._remainingTime?(this._remainingTime--,this.onTimeChanged.dispatch(),this.timer=setTimeout((function(){return e.onTimerTick()}),1e3)):(this.clearTimer(),this._currentScreen===n.MEMORIZING?this.nextScreen():this._currentScreen===n.PROCESSING&&(this.tsumo&&(this.dropTile(-1),this.handService.hasTiles?(this.handService.nextTile(),this.onHandChanged.dispatch(),this.setTimer()):this.setScreen(n.FAIL)),this.processingState=y.PROCESSING,this.onProcessingStateChanged.dispatch(this.processingState)))}},{key:"clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=void 0)}},{key:"clear",value:function(){this.showRules=!1,this.processingState=this._currentScreen===n.PROCESSING?y.PROCESSING:y.IDLE,this.clearTimer(),this._remainingTime=0}},{key:"selectTile",value:function(e){switch(e=this.tryInvertIndex(e),this.processingState){case y.IDLE:throw new Error("cannot select tile, incorrect processing state");case y.PROCESSING:this.dropTileWithTimeout(e);break;case y.CHOOSE_TEMPAI:this.dropTile(e),this.checkTempai();break;case y.CHOOSE_KAN:this.tryCallKan(e)}}},{key:"checkTempai",value:function(){var e=this.handService.getStr();this.tempaiService.hasTempai(e)?this.setScreen(n.SUCCESS):this.setScreen(n.FAIL)}},{key:"tryCallKan",value:function(e){this.handService.tryCallKan(e)?(this.processingState=y.PROCESSING,this.onProcessingStateChanged.dispatch(this.processingState),this.onHandChanged.dispatch(),this.setTimer()):this.setScreen(n.FAIL)}},{key:"dropTileWithTimeout",value:function(e){var t=this;this.dropTile(e),setTimeout((function(){t.handService.hasTiles?(t.handService.nextTile(),t.onHandChanged.dispatch(),t.setTimer()):t.setScreen(n.FAIL)}),200)}},{key:"dropTile",value:function(e){-1===e?this.handService.dropTsumo():this.handService.dropFromHand(e)}},{key:"tryInvertIndex",value:function(e){return this.invertTiles&&-1!==e?this.handService.getHand().length-e-1:e}},{key:"chooseTempaiClicked",value:function(){this.processingState=this.processingState===y.CHOOSE_TEMPAI?y.PROCESSING:y.CHOOSE_TEMPAI,this.onProcessingStateChanged.dispatch(this.processingState)}},{key:"chooseKanClicked",value:function(){this.processingState=this.processingState===y.CHOOSE_KAN?y.PROCESSING:y.CHOOSE_KAN,this.onProcessingStateChanged.dispatch(this.processingState)}},{key:"openRules",value:function(){this.clearTimer(),this.previousScreen=this.currentScreen,this.setScreen(n.RULES)}},{key:"openSettings",value:function(){this.clear(),this.setScreen(n.SETTINGS)}},{key:"openAbout",value:function(){this.clearTimer(),this.previousScreen=this.currentScreen,this.setScreen(n.ABOUT)}},{key:"hideTiles",get:function(){return this.getSettings().hideTiles}},{key:"useTimer",get:function(){return this.getSettings().useTimer}},{key:"invertTiles",get:function(){return this.getSettings().invertTiles}},{key:"currentScreen",get:function(){return this._currentScreen}},{key:"hand",get:function(){return this.handService.getHand()}},{key:"tsumo",get:function(){return this.handService.getTsumo()}},{key:"kanTiles",get:function(){return this.handService.getKanTiles()}},{key:"remainingTiles",get:function(){var e=this.handService.remainingTiles;return e>9?e.toString():"0"+e}},{key:"discard",get:function(){return this.handService.getDiscard()}},{key:"remainingTimeStr",get:function(){var e=this._remainingTime%60,t=Math.round((this._remainingTime-e)/60),i=e>9?e:"0"+e;return"".concat(t," : ").concat(i)}}]),e}();E._instance=void 0;var N=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,null,[{key:"getSvg",value:function(e){switch(e.suit){case d.MANZU:return this.getManTile(e.value);case d.PINZU:return this.getPinTile(e.value);case d.SOUZU:return this.getSouTile(e.value);case d.JIHAI:return this.getJihaiTile(e.value)}}},{key:"getManTile",value:function(e){if(e>0&&e<10)return"man".concat(e);throw new Error("".concat(e," is incorrect value for man suit"))}},{key:"getPinTile",value:function(e){if(e>0&&e<10)return"pin".concat(e);throw new Error("".concat(e," is incorrect value for pin suit"))}},{key:"getSouTile",value:function(e){if(e>0&&e<10)return"sou".concat(e);throw new Error("".concat(e," is incorrect value for sou suit"))}},{key:"getJihaiTile",value:function(e){switch(e){case 1:return"jihaiHaku";case 2:return"jihaiHatsu";case 3:return"jihaiChun";case 4:return"jihaiTon";case 5:return"jihaiNan";case 6:return"jihaiShaa";case 7:return"jihaiPei";default:throw new Error("".concat(e," is incorrect value for jihai suit"))}}}]),e}(),O=(i(19),function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(o.a)(this,Object(h.a)(t).call(this,e))).stateService=E.instance,i.state={isDropped:!1},i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.stateService.onHandChanged.add(this.updateState,this)}},{key:"componentWillUnmount",value:function(){this.stateService.onHandChanged.remove(this.updateState,this)}},{key:"updateState",value:function(){this.setState({isDropped:!1})}},{key:"onTileSelected",value:function(){this.props.selectable&&void 0!==this.props.index&&(this.setState({isDropped:!0}),this.stateService.selectTile(this.props.index))}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"tile ".concat(this.props.isTsumo?" tile--tsumo":""," ").concat(this.props.highlighted?" tile--highlighted":""),onClick:function(){return e.onTileSelected()}},a.createElement("div",{className:"tile__inner"},this.state.isDropped&&a.createElement("div",{className:"tile__box"}),!this.state.isDropped&&this.props.isFallen&&!this.props.hidden&&a.createElement("svg",{viewBox:"0 0 300 370",className:"tile__box tile__box--discard"},a.createElement("use",{xlinkHref:"#tile-fallen"})),!this.state.isDropped&&this.props.isFallen&&this.props.hidden&&a.createElement("svg",{viewBox:"0 0 300 370",className:"tile__box tile__box--discard"},a.createElement("use",{xlinkHref:"#tile-hidden-fallen"})),!this.state.isDropped&&!this.props.isFallen&&this.props.hidden&&a.createElement("svg",{viewBox:"0 0 300 470",className:"tile__box"},a.createElement("use",{xlinkHref:"#tile-hidden"})),!this.state.isDropped&&!this.props.isFallen&&!this.props.hidden&&a.createElement("svg",{viewBox:"0 0 300 470",className:"tile__box"},a.createElement("use",{xlinkHref:"#tile-hand"})),!this.state.isDropped&&!this.props.hidden&&a.createElement("svg",{viewBox:"0 0 300 400",className:"tile__drawing"+(this.props.isFallen?" tile__drawing--discard":" tile__drawing--hand")},a.createElement("use",{xlinkHref:"#".concat(N.getSvg(this.props.tile))}))))}}]),t}(a.Component)),C=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getTile",value:function(e){return a.createElement(O,{tile:e,isTsumo:!1,highlighted:!1,isFallen:!1,selectable:!1,hidden:!1})}},{key:"render",value:function(){return a.createElement("div",{className:"hand hand--example"},this.getTile({value:7,suit:3}),this.getTile({value:6,suit:3}),this.getTile({value:5,suit:3}),this.getTile({value:4,suit:3}),this.getTile({value:3,suit:3}),this.getTile({value:2,suit:3}),this.getTile({value:1,suit:3}),this.getTile({value:9,suit:2}),this.getTile({value:1,suit:2}),this.getTile({value:9,suit:1}),this.getTile({value:1,suit:1}),this.getTile({value:9,suit:0}),this.getTile({value:1,suit:0}))}}]),t}(a.Component),j=function(e){function t(){var e,i;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(i=Object(o.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).stateService=E.instance,i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onOkClick",value:function(){this.stateService.nextScreen()}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"rules"},a.createElement("div",{className:"page-header"},a.createElement("div",{className:"page-header__title"},"How to play")),a.createElement("div",{className:"page-content"},a.createElement("div",{className:"rules"},"You have one minute to remember a hand.",a.createElement("br",null),a.createElement("br",null),"When you are ready, the hand is shown to you as if it is your opponent's hand \u2014 you see the back of the tiles and they are sorted in the reverse order:",a.createElement("br",null),a.createElement("br",null),"Pei, Shaa, Nan, Ton, Chun, Hatsu, Haku, 9-1 sou, 9-1 pin, 9-1 man.",a.createElement("br",null),a.createElement("br",null),a.createElement(C,null),a.createElement("br",null),a.createElement("br",null),"After each draw you have 20 seconds to discard a tile. When the time runs out, tsumo tile is discarded.",a.createElement("br",null),a.createElement("br",null),'Your goal is to complete tempai. When you believe you got tempai, press the "Tempai" button and select the last tile to discard.',a.createElement("br",null),a.createElement("br",null),'If you want to stop or you have made a mistake you cannot fix, press the "Give up" button - current hand state will be shown to you.',a.createElement("br",null),a.createElement("br",null),"Also you can disable inversion, hiding and other preferences in ",a.createElement("a",{onClick:function(){return e.stateService.openSettings()}},"settings"),"."),a.createElement("div",{className:"flex-container flex-container--end"},a.createElement("div",{className:"flat-btn flat-btn--green"},a.createElement("div",{className:"flat-btn__caption",onClick:function(){return e.onOkClick()}},"Got it!")))))}}]),t}(a.Component),_=function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(o.a)(this,Object(h.a)(t).call(this,e))).stateService=E.instance,i.state={tiles:i.props.reverse?i.stateService.hand.reverse():i.stateService.hand,kanTiles:i.stateService.kanTiles,tsumo:i.stateService.tsumo},i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.stateService.onHandChanged.add(this.updateState,this)}},{key:"componentWillUnmount",value:function(){this.stateService.onHandChanged.remove(this.updateState,this)}},{key:"updateState",value:function(){this.setState({tiles:this.props.reverse?this.stateService.hand.reverse():this.stateService.hand,tsumo:this.stateService.tsumo,kanTiles:this.stateService.kanTiles})}},{key:"getHand",value:function(){return this.state.tiles.map(this.getTile.bind(this))}},{key:"getKans",value:function(){var e=this;return a.createElement("div",{className:"kan"},this.getAllKanTiles().map((function(t,i){return e.getKanTile(t,e.props.hiddenTiles||i%4===0||i%4===3)})))}},{key:"getAllKanTiles",value:function(){if(1===this.state.kanTiles.length){var e=this.state.kanTiles[0];return[e,e,e,e]}return this.state.kanTiles.reduce((function(e,t){var i=Array.isArray(e)?e:[e,e,e,e];return i.push(t),i.push(t),i.push(t),i.push(t),i}))}},{key:"getTile",value:function(e,t){return a.createElement(O,{tile:e,index:t,isTsumo:!1,highlighted:!1,isFallen:this.props.isOpenHand,selectable:this.props.selectable,hidden:this.props.hiddenTiles})}},{key:"getKanTile",value:function(e,t){return a.createElement(O,{tile:e,isTsumo:!1,highlighted:!1,isFallen:!0,selectable:!1,hidden:t})}},{key:"getClassName",value:function(){var e="hand";return this.props.selectable&&(e+=" hand--selectable"),this.state.tsumo&&(e+=" hand--with-tsumo"),e}},{key:"render",value:function(){return a.createElement("div",{className:this.getClassName()},this.state.tsumo&&a.createElement(O,{tile:this.state.tsumo,isTsumo:!0,index:-1,highlighted:!1,isFallen:this.props.isOpenHand,selectable:this.props.selectable,hidden:!1}),this.getHand(),0!==this.state.kanTiles.length&&this.getKans())}}]),t}(a.Component),w=function(e){function t(){var e,i;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(i=Object(o.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).stateService=E.instance,i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onRulesClick",value:function(){this.stateService.openRules()}},{key:"onSettingsClick",value:function(){this.stateService.openSettings()}},{key:"onAboutClick",value:function(){this.stateService.openAbout()}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"page-footer"},a.createElement("div",{className:"flex-container flex-container--center flex-container--margin-s"},a.createElement("div",{className:"page-footer__link",onClick:function(){return e.onRulesClick()}},"Rules"),a.createElement("div",{className:"page-footer__separator"}),a.createElement("div",{className:"page-footer__link",onClick:function(){return e.onSettingsClick()}},"Settings"),a.createElement("div",{className:"page-footer__separator"}),a.createElement("div",{className:"page-footer__link",onClick:function(){return e.onAboutClick()}},"About")))}}]),t}(a.Component),I=function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(o.a)(this,Object(h.a)(t).call(this,e))).stateService=E.instance,i.state={useTimer:i.stateService.useTimer,remainingTime:"0"},i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.stateService.onTimeChanged.add(this.onTimeChanged,this),this.stateService.setTimer()}},{key:"componentWillUnmount",value:function(){this.stateService.onTimeChanged.remove(this.onTimeChanged,this)}},{key:"onTimeChanged",value:function(){this.setState({remainingTime:this.stateService.remainingTimeStr})}},{key:"goNext",value:function(){this.stateService.nextScreen()}},{key:"render",value:function(){var e=this,t=this.state,i=t.useTimer,n=t.remainingTime;return a.createElement("div",null,a.createElement("div",{className:"page-header"},a.createElement("div",{className:"page-header__title"},"Remember the hand")),a.createElement("div",{className:"page-content"},a.createElement("div",{className:"flex-container"+(i?" flex-container--between":" flex-container--end")},i&&a.createElement("div",{className:"timer"},n),a.createElement("div",{className:"flat-btn flat-btn--green"},a.createElement("div",{className:"flat-btn__caption",onClick:function(){return e.goNext()}},"Ready"))),a.createElement(_,{selectable:!1,isOpenHand:!1,reverse:!1,hiddenTiles:!1})),a.createElement(w,null))}}]),t}(a.Component),P=function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(o.a)(this,Object(h.a)(t).call(this,e))).stateService=E.instance,i.state={tiles:i.stateService.discard},i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.stateService.onHandChanged.add(this.updateState,this)}},{key:"componentWillUnmount",value:function(){this.stateService.onHandChanged.remove(this.updateState,this)}},{key:"updateState",value:function(){this.setState({tiles:this.stateService.discard})}},{key:"getDiscard",value:function(){var e=this;return[this.state.tiles.slice(0,6),this.state.tiles.slice(6,12),this.state.tiles.slice(12,18)].map((function(t){return a.createElement("div",{className:"discard__line"},t.map(e.getTile))}))}},{key:"getTile",value:function(e){return a.createElement(O,{tile:e,isTsumo:!1,highlighted:e.tsumogiri,isFallen:!0,selectable:!1,hidden:!1})}},{key:"render",value:function(){return a.createElement("div",{className:"discard"},this.getDiscard())}}]),t}(a.Component),x=function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(o.a)(this,Object(h.a)(t).call(this,e))).stateService=E.instance,i.state={hideTiles:i.stateService.hideTiles,useTimer:i.stateService.useTimer,invertTiles:i.stateService.invertTiles,canCall:!0,processingState:y.PROCESSING,remainingTime:"0",remainingTiles:i.stateService.remainingTiles},i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.stateService.onTimeChanged.add(this.onTimeChanged,this),this.stateService.setTimer(),this.stateService.onProcessingStateChanged.add(this.onProcessingStateChanged,this),this.stateService.onHandChanged.add(this.onHandChanged,this)}},{key:"componentWillUnmount",value:function(){this.stateService.onTimeChanged.remove(this.onTimeChanged,this),this.stateService.onProcessingStateChanged.remove(this.onProcessingStateChanged,this),this.stateService.onHandChanged.remove(this.onHandChanged,this)}},{key:"onTimeChanged",value:function(){this.setState({remainingTime:this.stateService.remainingTimeStr})}},{key:"onProcessingStateChanged",value:function(e){this.setState({processingState:e})}},{key:"onHandChanged",value:function(){this.setState({remainingTiles:this.stateService.remainingTiles,canCall:Number(this.stateService.remainingTiles)>=1})}},{key:"onTempaiClick",value:function(){this.stateService.chooseTempaiClicked()}},{key:"onKanClick",value:function(){this.state.canCall&&this.stateService.chooseKanClicked()}},{key:"onGiveUpClick",value:function(){this.stateService.nextScreen()}},{key:"render",value:function(){var e=this,t=this.state,i=t.hideTiles,n=t.useTimer,s=t.invertTiles,r=t.canCall,l=t.processingState,c=t.remainingTime,u=t.remainingTiles;return a.createElement("div",null,a.createElement("div",{className:"page-header"},a.createElement("div",{className:"page-header__title"},l===y.PROCESSING&&"Drop a tile",l===y.CHOOSE_TEMPAI&&"Select tempai",l===y.CHOOSE_KAN&&"Select kan")),a.createElement("div",{className:"page-content"},a.createElement("div",{className:"flex-container"+(n?" flex-container--between":" flex-container--end")},n&&a.createElement("div",{className:"timer"},c),a.createElement("div",{className:"flex-container flex-container--end flex-container--no-margin"},a.createElement("div",{className:"flat-btn flat-btn--blue ".concat(l===y.CHOOSE_KAN?"flat-btn--pressed":""," ").concat(r?"":"flat-btn--disabled")},a.createElement("div",{className:"flat-btn__caption",onClick:function(){return e.onKanClick()}},"Kan!")),a.createElement("div",{className:"flat-btn flat-btn--blue"+(l===y.CHOOSE_TEMPAI?" flat-btn--pressed":"")},a.createElement("div",{className:"flat-btn__caption",onClick:function(){return e.onTempaiClick()}},"Tempai")))),a.createElement(_,{selectable:!0,isOpenHand:!1,reverse:s,hiddenTiles:i}),a.createElement("div",{className:"remaining-tiles"},"x",u),a.createElement(P,null),a.createElement("div",{className:"flex-container flex-container--end"},a.createElement("div",{className:"flat-btn flat-btn--red"},a.createElement("div",{className:"flat-btn__caption",onClick:function(){return e.onGiveUpClick()}},"Give up")))),a.createElement(w,null))}}]),t}(a.Component),A=function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(o.a)(this,Object(h.a)(t).call(this,e))).stateService=E.instance,i.state={tiles:i.stateService.discard},i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onNewGameClick",value:function(){ym(55440343,"reachGoal","NEW_GAME"),this.props.onClick&&this.props.onClick(),this.stateService.nextScreen()}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"flat-btn flat-btn--white"},a.createElement("div",{className:"flat-btn__caption",onClick:function(){return e.onNewGameClick()}},"New game"))}}]),t}(a.Component),H=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.createElement("div",null,a.createElement("div",{className:"page-header"},a.createElement("div",{className:"page-header__title"},"SUCCESS")),a.createElement("div",{className:"page-content"},a.createElement("div",{className:"flex-container flex-container--end"},a.createElement(A,null)),a.createElement(_,{selectable:!1,isOpenHand:!0,reverse:!1,hiddenTiles:!1}),a.createElement(P,null)),a.createElement(w,null))}}]),t}(a.Component),M=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.createElement("div",null,a.createElement("div",{className:"page-header"},a.createElement("div",{className:"page-header__title"},"FAIL")),a.createElement("div",{className:"page-content"},a.createElement("div",{className:"flex-container flex-container--end"},a.createElement(A,null)),a.createElement(_,{selectable:!1,isOpenHand:!0,reverse:!1,hiddenTiles:!1}),a.createElement(P,null)),a.createElement(w,null))}}]),t}(a.Component),R=function(e){function t(){var e,i;Object(c.a)(this,t);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(i=Object(o.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).stateService=E.instance,i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onOkClick",value:function(){this.stateService.nextScreen()}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"about"},a.createElement("div",{className:"page-header"},a.createElement("div",{className:"page-header__title"},"About")),a.createElement("div",{className:"page-content"},a.createElement("div",{className:"about"},"Irmin is a God of ",a.createElement("i",null,"who knows what"),". That's how much you know about your hand in this game.",a.createElement("br",null),a.createElement("br",null),"This project is kind of riichi mahjong for two (but online and for one), memory trainer.",a.createElement("br",null),a.createElement("br",null),"Repo: ",a.createElement("a",{href:"https://github.com/kovavka/irmin"},"GitHub"),a.createElement("br",null),"Me:",a.createElement("ul",null,a.createElement("li",null,a.createElement("a",{target:"blank",href:"https://t.me/kovavka"},"t.me/kovavka")),a.createElement("li",null,a.createElement("a",{target:"blank",href:"mailto:kovavka@gmail.com"},"kovavka@gmail.com"))),a.createElement("br",null),a.createElement("br",null),"Please, report bug if you get one."),a.createElement("div",{className:"flex-container"},a.createElement("div",{className:"flat-btn flat-btn--white"},a.createElement("div",{className:"flat-btn__caption",onClick:function(){return e.onOkClick()}},"Back")))))}}]),t}(a.Component),U=function(e){function t(e){return Object(c.a)(this,t),Object(o.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onToggle",value:function(){this.props.onToggle()}},{key:"render",value:function(){var e=this;return a.createElement("label",{className:"switch",onClick:function(){return e.onToggle()}},a.createElement("span",{className:"switch__box"+(this.props.switched?" switch__box--on":"")}),a.createElement("span",{className:"switch__button"+(this.props.switched?" switch__button--on":"")}))}}]),t}(a.Component),G=function(e){function t(e){var i;Object(c.a)(this,t),(i=Object(o.a)(this,Object(h.a)(t).call(this,e))).stateService=E.instance;var n=i.stateService.getSettings();return i.state={defaultSettings:n.defaultSettings,useTimer:n.useTimer,rememberTime:n.rememberTime,dropTime:n.dropTime,sortTiles:n.sortTiles,invertTiles:n.invertTiles,hideTiles:n.hideTiles},i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onDefaultSettingsClick",value:function(){var e=!this.state.defaultSettings;if(e){var t=this.stateService.getDefault();t.defaultSettings=e,this.setState(t),this.setValue(t)}else this.setState({defaultSettings:e})}},{key:"onUseTimerClick",value:function(){if(!this.state.defaultSettings){var e={useTimer:!this.state.useTimer};this.setState(e),this.setValue(e)}}},{key:"onSortTilesClick",value:function(){if(!this.state.defaultSettings){var e={sortTiles:!this.state.sortTiles};this.setState(e),this.setValue(e)}}},{key:"onInvertTilesClick",value:function(){if(!this.state.defaultSettings){var e={invertTiles:!this.state.invertTiles};this.setState(e),this.setValue(e)}}},{key:"onHideTilesClick",value:function(){if(!this.state.defaultSettings){var e={hideTiles:!this.state.hideTiles};this.setState(e),this.setValue(e)}}},{key:"rememberTimeChange",value:function(e){if(this.state.useTimer&&this.isValidTime(e)){var t={rememberTime:e.target.value};this.setState(t),this.setValue(t)}}},{key:"dropTimeChange",value:function(e){if(this.state.useTimer&&this.isValidTime(e)){var t={dropTime:e.target.value};this.setState(t),this.setValue(t)}}},{key:"isValidTime",value:function(e){return e.target.validity.valid}},{key:"setValue",value:function(e){this.stateService.setSettings(e)}},{key:"render",value:function(){var e=this,t=this.state,i=t.defaultSettings,n=t.useTimer,s=t.sortTiles,r=t.invertTiles,l=t.hideTiles;return a.createElement("div",{className:"rules"},a.createElement("div",{className:"page-header"},a.createElement("div",{className:"page-header__title"},"Settings")),a.createElement("div",{className:"page-content settings"},a.createElement("div",{className:"flex-container"},a.createElement(U,{switched:i,onToggle:function(){return e.onDefaultSettingsClick()}}),a.createElement("div",null,"Default settings")),a.createElement("div",{className:"settings__options"+(i?" settings__options--disabled":"")},a.createElement("div",{className:"flex-container flex-container--margin-m"},a.createElement(U,{switched:n,onToggle:function(){return e.onUseTimerClick()}}),a.createElement("div",null,"Use timer")),a.createElement("div",{className:"settings__options"+(n?"":" settings__options--disabled")},a.createElement("div",{className:"flex-container flex-container--margin-m"},a.createElement("input",{type:"text",pattern:"[0-9]{1,3}",onInput:function(t){return e.rememberTimeChange(t)},value:this.state.rememberTime}),a.createElement("div",null,"Time to remember the hand")),a.createElement("div",{className:"flex-container flex-container--margin-m"},a.createElement("input",{type:"text",pattern:"[0-9]{1,3}",onInput:function(t){return e.dropTimeChange(t)},value:this.state.dropTime}),a.createElement("div",null,"Time to choose discard"))),a.createElement("div",{className:"flex-container flex-container--margin-m"},a.createElement(U,{switched:s,onToggle:function(){return e.onSortTilesClick()}}),a.createElement("div",null,"Sort tiles")),a.createElement("div",{className:"flex-container flex-container--margin-m"},a.createElement(U,{switched:r,onToggle:function(){return e.onInvertTilesClick()}}),a.createElement("div",null,"Invert tiles")),a.createElement("div",{className:"flex-container flex-container--margin-m"},a.createElement(U,{switched:l,onToggle:function(){return e.onHideTilesClick()}}),a.createElement("div",null,"Hide tiles"))),a.createElement("div",{className:"flex-container flex-container--end"},a.createElement(A,null))))}}]),t}(a.Component),K=function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(o.a)(this,Object(h.a)(t).call(this,e))).stateService=E.instance,i.state={currentScreen:i.stateService.currentScreen},i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.stateService.onChange.add(this.updateState,this)}},{key:"componentWillUnmount",value:function(){this.stateService.onChange.remove(this.updateState,this)}},{key:"updateState",value:function(){this.setState({currentScreen:this.stateService.currentScreen})}},{key:"render",value:function(){var e=this.stateService.currentScreen;return a.createElement("div",{className:"App"},e===n.RULES&&a.createElement(j,null),e===n.MEMORIZING&&a.createElement(I,null),e===n.PROCESSING&&a.createElement(x,null),e===n.SUCCESS&&a.createElement(H,null),e===n.FAIL&&a.createElement(M,null),e===n.ABOUT&&a.createElement(R,null),e===n.SETTINGS&&a.createElement(G,null))}}]),t}(a.Component);var D=i(8),F=i.n(D),Z=i(11);function W(){return(W=Object(Z.a)(F.a.mark((function e(){var t,i,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("sprite.svg").then((function(e){return e.clone()}));case 2:return t=e.sent,e.next=5,t.text();case 5:i=e.sent,(n=document.querySelector(".sprite")).innerHTML=i,document.body.appendChild(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(){return function(){W.apply(this,arguments)}(),(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&document.querySelector("#root").classList.add("mobile"),s.a.createElement(K,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[12,1,2]]]);
//# sourceMappingURL=main.dbbf23fe.chunk.js.map